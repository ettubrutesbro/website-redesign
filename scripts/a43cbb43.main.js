"use strict";window.Solidarity=_.extend(window.Solidarity,{Models:{},Collections:{},Views:{},Routers:{},init:function(){if(console.log("Stories of Solidarity"),this.mainContent=Solidarity.RegionManager,new Solidarity.Routers.Auth({}),new Solidarity.Routers.Pages({}),new Solidarity.Routers.Stories({}),this.shareBar=new Solidarity.Views.ShareBar({}),!Backbone.history.start()){var a="404 for /"+window.location.hash+" redirecting to /#about";console.error(a),Backbone.history.navigate("about",{trigger:!0})}$.ajaxSetup({headers:{"X-Requested-With":"XMLHttpRequest"}}),$('a[href^="sms:"]').click(function(){return window.innerWidth>768?!1:void 0}),$(".navbar-collapse li.button a").on("click",function(){$(".navbar-collapse").hasClass("in")&&$(".navbar-collapse").collapse("hide")})},log:function(a,b){Solidarity.DEBUG&&(b?console.log(a,b):console.log(a))},error:function(a,b){Solidarity.DEBUG?(console.error(b),console.error(a)):Raven.captureException(a)}}),window.urlParam=function(a){var b=window.location.href.match(/^[^#]+#([^?]*)\??(.*)/),c=(b[1],b[2]),d=c.split(a+"=")[1];return void 0!==d?decodeURIComponent(d.split("&")[0]):null},$(document).ready(function(){Solidarity.init(),Solidarity.DEBUG||Raven.config("https://415051242ec344cbabbe0f419b0561c9@app.getsentry.com/53317").install(),window.location.hash&&"#splash"!==window.location.hash&&(Solidarity.log("starting at"+window.location.hash),$("nav.navbar-default").removeClass("hidden"),$("footer.footer").removeClass("hidden"))}),this.JST=this.JST||{},this.JST["app/templates/about.html"]=function(a){var b="";_.escape;return b+='<section class="jumbotron">\n    <h1 style="border-bottom:1px solid #ccc;padding-bottom:17px;font-weight:300;font-size:20px;letter-spacing:4px;color:#CCCCCC;font-family:\'bignoodle\';">STORIES OF SOLIDARITY</h1>\n\n    <h2 class="sans-serif">A social media platform that encourages workers in the low-wage, precarious workforce to build new forms of solidarity.</h2>\n</section>\n\n<section class="jumbotron" style="background-color: #e5ae5b;">\n    <h2 class="sans-serif">What is <span style="font-family:\'bignoodle\';font-weight:normal;letter-spacing:2px;font-size: 40px;">STORIES OF SOLIDARITY</span>?</h2>\n    <iframe src="//player.vimeo.com/video/75254033?title=0&amp;byline=0" width="800" height="450" frameborder="0" webkitallowfullscreen="" mozallowfullscreen="" allowfullscreen=""></iframe>\n</section>\n\n<section class="jumbotron" style="background: #bcbcbc;">\n    <h2 class="sans-serif">How does it work?</h1>\n    <div style="width:450px;margin-bottom:30px;border-left:2px dotted #666;padding-left:10px;">\n        Post a story via the web, mobile app, or text messaging. It will appear on the map, creating a visualization of narratives. Totally anonymous.\n    </div>\n    <div style="text-align:center;"><img src="images/15db276c.howitworks.png" width="100%" style="max-width:750px;"></div>        \n</section>\n'},this.JST["app/templates/authLogin.html"]=function(a){var b,c="";_.escape;return c+='<div class="auth login container-fluid">\n\n<div class="alert alert-info alert-dismissable">\n    <button type="button" class="close" data-dismiss="alert" aria-label="Close"><span aria-hidden="true">&times;</span></button>\n    Never registered? <a href="#auth/register">Create a new user</a><br />\n    Forgot your password? <a href="#auth/password/reset">Reset it</a>\n</div>\n\n<h2>Log In User</h2>\n\n<form class="form-horizontal" id="login" action="'+(null==(b=Solidarity.apiRoot)?"":b)+'auth/login/" method="POST">\n    <div class="form-group">\n        <label for="username" class="col-sm-2 control-label">Username:</label>\n        <input name="username" class="col-sm-4" />\n        <span class="help-block col-sm-4"></span>\n    </div>\n\n    <div class="form-group">\n        <label for="password" class="col-sm-2 control-label">Password:</label>\n        <input name="password" class="col-sm-4" type="password"/>\n        <span class="help-block col-sm-4"></span>\n    </div>\n\n    <div class="form-group">\n        <button class="btn btn-primary col-sm-offset-2" type="submit">\n            <span class="glyphicon glyphicon-log-in"></span> Go\n        </button>\n    </div>\n</form>\n\n</div>'},this.JST["app/templates/authPasswordChange.html"]=function(a){var b,c="";_.escape;return c+='<div class="auth passwordChange container-fluid">\n\n<h2>Change Password</h2>\n\n<form class="form-horizontal" id="passwordChange" action="'+(null==(b=Solidarity.apiRoot)?"":b)+'auth/password/change/" method="POST">\n\n    <div class="form-group">\n        <label for="new_password1" class="col-sm-2 control-label">New Password:</label>\n        <input name="new_password1" class="col-sm-4" type="password"/>\n        <span class="help-block"></span>\n    </div>\n\n    <div class="form-group">\n        <label for="new_password2" class="col-sm-2 control-label">Confirm New Password:</label>\n        <input name="new_password2" class="col-sm-4" type="password"/>\n        <span class="help-block"></span>\n    </div>\n\n    <div class="form-group">\n        <button class="btn btn-primary col-sm-offset-2" type="submit">\n            <span class="glyphicon glyphicon-log-in"></span> Go\n        </button>\n    </div>\n</form>\n\n</div>'},this.JST["app/templates/authPasswordReset.html"]=function(a){var b,c="";_.escape;return c+='<div class="auth passwordReset container-fluid">\n\n<h2>Reset Password</h2>\n\n<form class="form-horizontal" id="passwordReset" action="'+(null==(b=Solidarity.apiRoot)?"":b)+'auth/password/reset/" method="POST">\n\n    <div class="form-group">\n        <label for="email" class="col-sm-2 control-label">Registered Email:</label>\n        <input name="email" class="col-sm-4" type="email"/>\n        <span class="help-block col-sm-4"></span>\n    </div>\n\n    <div class="form-group">\n        <button class="btn btn-primary col-sm-offset-2" type="submit">\n            <span class="glyphicon glyphicon-log-in"></span> Go\n        </button>\n    </div>\n</form>\n\n</div>'},this.JST["app/templates/authPasswordResetConfirm.html"]=function(a){var b,c="";_.escape;return c+='<div class="auth passwordChange container-fluid">\n\n<h2>Set New Password</h2>\n\n<form class="form-horizontal" id="passwordResetConfirm" action="'+(null==(b=Solidarity.apiRoot)?"":b)+'auth/password/reset/confirm/" method="POST">\n\n    <div class="form-group">\n        <label for="new_password1" class="col-sm-2 control-label">New Password:</label>\n        <input name="new_password1" class="col-sm-4" type="password"/>\n        <span class="help-block col-sm-4"></span>\n    </div>\n\n    <div class="form-group">\n        <label for="new_password2" class="col-sm-2 control-label">Confirm New Password:</label>\n        <input name="new_password2" class="col-sm-4" type="password"/>\n        <span class="help-block col-sm-4"></span>\n    </div>\n\n    <div class="form-group">\n        <button class="btn btn-primary col-sm-offset-2" type="submit">\n            <span class="glyphicon glyphicon-log-in"></span> Go\n        </button>\n    </div>\n</form>\n\n</div>'},this.JST["app/templates/authRegister.html"]=function(a){var b,c="";_.escape;return c+='<div class="auth register container-fluid">\n\n<div class="alert alert-info alert-dismissable">\n    <button type="button" class="close" data-dismiss="alert" aria-label="Close"><span aria-hidden="true">&times;</span></button>\n    Already registered? <a href="#auth/login">Login</a>\n</div>\n\n<h2>Register New User</h2>\n\n<form class="form-horizontal" id="register" action="'+(null==(b=Solidarity.apiRoot)?"":b)+'auth/registration/" method="POST">\n    <div class="form-group">\n        <label for="username" class="col-sm-2 control-label">Username:</label>\n        <input name="username" class="col-sm-4" />\n        <span class="help-block col-sm-4"></span>\n    </div>\n\n    <div class="form-group">\n        <label for="password1" class="col-sm-2 control-label">Password:</label>\n        <input name="password1" class="col-sm-4" type="password"/>\n        <span class="help-block col-sm-4"></span>\n    </div>\n\n    <div class="form-group">\n        <label for="password2" class="col-sm-2 control-label">Confirm Password:</label>\n        <input name="password2" class="col-sm-4" type="password"/>\n        <span class="help-block col-sm-4"></span>\n    </div>\n\n    <div class="form-group">\n        <button class="btn btn-primary col-sm-offset-2" type="submit">\n            <span class="glyphicon glyphicon-log-in"></span> Go\n        </button>\n    </div>\n</form>\n\n</div>'},this.JST["app/templates/authUserDetails.html"]=function(a){var b,c="";_.escape;return c+='<div class="auth user container-fluid">\n\n<h2>User Update</h2>\n\n<form class="form-horizontal" id="userDetails" action="'+(null==(b=Solidarity.apiRoot)?"":b)+'auth/user/" method="POST">\n    <div class="form-group">\n        <label for="email" class="col-sm-2 control-label">Email:</label>\n        <input name="email" class="col-sm-4" />\n        <span class="help-block col-sm-4"></span>\n    </div>\n\n    <div class="form-group">\n        <label for="first_name" class="col-sm-2 control-label">First Name:</label>\n        <input name="first_name" class="col-sm-4" />\n        <span class="help-block col-sm-4"></span>\n    </div>\n\n    <div class="form-group">\n        <label for="last_name" class="col-sm-2 control-label">Last Name:</label>\n        <input name="last_name" class="col-sm-4" />\n        <span class="help-block col-sm-4"></span>\n    </div>\n\n    <div class="form-group">\n        <label for="phone" class="col-sm-2 control-label">SMS Number:</label>\n        <input name="phone" class="col-sm-4" />\n        <span class="help-block col-sm-4"></span>\n    </div>\n\n    <div class="form-group">\n        <button class="btn btn-primary col-sm-offset-2" type="submit">\n            <span class="glyphicon glyphicon-log-in"></span> Go\n        </button>\n    </div>\n</form>\n\n</div>'},this.JST["app/templates/copyright.html"]=function(a){var b="";_.escape;return b+='<div class="container">\n<h1>Copyright</h1>\n\n<p>Submitted content is provided under the Creative Commons license, which gives you the ability to share and adapt the material under the same license. Any re-use of the content must follow the following conditions:\n<ul>\n    <li>You must attribute the content to StoriesOfSolidarity.org. On the web, this means a link. For use offline, please use the text “Content (cc) StoriesOfSolidarity.org”</li>\n    <li>You cannot use our content for commercial purposes.</li>\n    <li>If you use our content, you must share what you create with it under the same license. This is called share-alike, and it\'s the basis of the free culture movement.</li>\n    <li>You may not redistribute photographs or reuse the StoriesOfSolidarity name and design without specific permission.</li>\n</ul>\n\n<p>You can find the full legal text of the license at <a href="http://creativecommons.org/licenses/by-nc-sa/3.0/legalcode">creativecommons.org/licenses/by-nc-sa/3.0/legalcode</a>\n\n<h2>Open Source</h2>\n<p>The code that powers this website, database and mobile application are open source, and available on <a href="https://github.com/storiesofsolidarity">GitHub</a> under the <a href="http://opensource.org/licenses/GPL-3.0"></a>GPL license. We welcome new feature ideas, issue reports, and pull requests.</p>\n\n<p>Specific functionality is provided by the <a href="http://d3js.org">D3</a> visualization library, <a href="https://www.djangoproject.com">Django</a> <a href="http://www.django-rest-framework.org">REST-Framework</a>, the <a href="https://www.twilio.com"></a>Twilio telephony service, and the <a href="www.mapzen.com"></a>Mapzen</a> geocoder. </p>\n</div>'},this.JST["app/templates/formError.html"]=function(a){var b,c="";_.escape;return c+='<div class="alert alert-warning" role="alert">\n  <span class="glyphicon glyphicon-exclamation-sign" aria-hidden="true"></span>\n  <span class="sr-only">Error:</span>\n  '+(null==(b=a.non_field_errors)?"":b)+"\n</div>"},this.JST["app/templates/learn.html"]=function(a){var b="";_.escape;return b+="<h1> Learn More </h1>"},this.JST["app/templates/privacy.html"]=function(a){var b="";_.escape;return b+='<div class="container">\n<h1>Privacy Policy</h1>\n\n<p>StoriesOfSolidarity takes seriously workers need for anonymity when speaking out, and our system is designed to protect your information to the best of our ability.</p>\n\n<h3>Submitted Information</h3>\n<p>If you register an account with us, we secure your login and password in our database with well-tested encryption methods <a href="https://docs.djangoproject.com/en/1.8/topics/auth/passwords/">[1]</a>. StoriesOfSolidarity staff and organizers may have access to any information you provided on account registration, including first and last name, occupation, employer, location (city, state, county or zipcode), and photograph.</p>\n\n<p>If you feel uncomfortable with revealing your real identity when sharing a story, please create an account using a pseudonym and sign up with a new email address that you do not share with other services.</p>\n\n<h3>Information Gathered</h3>\n<p>We log certain technical information as part of the normal operation of this site and may send it to third-parties for data analysis and service provision. These parties are covered by their own privacy policies.</p>\n    <ul>\n        <li><a href="https://www.cloudflare.com/security-policy">CloudFlare</a> may receive your full IP address, or other potentially identifiable browser characteristics</li>\n        <li><a href="http://www.google.com/policies/privacy/">Google Analytics</a> may receive your anonymized IP address</li>\n        <li><a href="https://www.twilio.com/legal/privacy">Twilio</a> may receive your phone number if you send us a text message</li>\n        <li><a href="https://www.heroku.com/policy/privacy">Heroku</a> or <a href="https://sendgrid.com/privacy">SendGrid</a> may receive your email address if you register for an account with us</li>\n    </ul>\n\n<h3>Required Disclosure</h3>\n\n<p>We may disclose personally identifiable information about you to third parties in limited circumstances, including: (1) with your consent; or (2) when we have a good faith belief it is required by law, such as pursuant to a subpoena or other judicial or administrative order.</p>\n\n<p>If we are required by law to disclose the information that you have submitted, we will attempt to provide you with prior notice (unless we are prohibited or it would be futile) that a request for your information has been made in order to give you an opportunity to object to the disclosure. We will attempt to provide this notice by email, if you have given us an email address, or by postal mail if you have entered a postal address. If you do not challenge the disclosure request, we may be legally required to turn over your information.</p>\n\n<h4>Acknowledgements</h4>\n\n<em>Portions of this policy provided by the <a href="https://www.eff.org/policy"></a>Electronic Frontier Foundation, under a Creative Commons Attribution license</em>\n\n</div>'},this.JST["app/templates/splash.html"]=function(a){var b,c="";_.escape;return c+='<div class="splash">\n    <div class="center">\n    <ul class="statement" >\n        <li id="zh">\n            <img src="'+(null==(b=Solidarity.siteRoot+"images/logo/91f3a7af.logo_zh.png")?"":b)+'" alt="我们的故事" />\n            <h1>与他人分享您的工作的故事。</h1>\n            <h2>改变从这里开始。</h2>\n            <button class="btn enter" href="#map" data-lang="ZH">输入</button>\n        </li>\n\n        <li id="en" style="display: none;">\n            <img src="'+(null==(b=Solidarity.siteRoot+"images/logo/975c7a33.logo_en.png")?"":b)+'" alt="Stories of Solidarity" />\n            <div class="inner">\n                <h1>Share your work story with others.</h1>\n                <h2>Change starts here.</h2>\n            </div>\n            <button class="btn enter" href="#map" data-lang="EN">ENTER</button>\n        </li>\n\n        <li id="es" style="display: none;">\n            <img src="'+(null==(b=Solidarity.siteRoot+"images/logo/cc5503ae.logo_es.png")?"":b)+'" alt="Historias de Solidaridad" />\n            <h1>Comparte su historia del trabajo con otros.</h1>\n            <h2>Camboio empeiza aqui.</h2>\n            <button class="btn enter" href="#map" data-lang="ES">ENTRAR</button>\n        </li>\n\n        <li id="tl" style="display: none;">\n            <img src="'+(null==(b=Solidarity.siteRoot+"images/logo/dab8dbe7.logo_tl.png")?"":b)+'" alt="Kuwento ng Solidarity" />\n            <h1>Ibahagi ang iyong kuwento trabaho sa iba.</h1>\n            <h2>Baguhin ang nagsisimula dito.</h2>\n            <button class="btn enter" href="#map" data-lang="TL">PUMASOK</button>\n        </li>\n    </ul>\n\n    <ul class="languages">\n        <li><button class="btn lang active" href="#map" data-lang="zh">\n            <span style="margin-left:-1px;">中国</span>\n        </button></li>\n        <li><button class="btn lang" href="#map" data-lang="en"><span>ENG</span></button></li>\n        <li><button class="btn lang" href="#map" data-lang="es"><span>ESP</span></button></li>\n        <li><button class="btn lang" href="#map" data-lang="tl"><span>TAG</span></button></li>\n    </ul>\n\n    </div>\n</div>'},this.JST["app/templates/story.html"]=function(a){var b,c="",d=_.escape;Array.prototype.join;return c+='<div class="storyRead">\n    <h1>',c+=a.author&&a.author.anonymous!==!0?'\n            <!-- <a href="#read/author/'+d(a.author.user.id)+'">'+d(a.author.user.first_name)+" "+d(a.author.user.last_name)+"</a> -->\n            "+d(a.author.user.first_name)+" "+d(a.author.user.last_name)+"\n        ":"\n            Anonymous\n        ",c+="\n        ",a.author&&a.author.occupation&&(c+="  "+d(a.author.occupation)+" "),c+="\n        ",a.author&&a.author.employer&&(c+=" at "+d(a.author.employer)+" "),c+="\n        ",a.location&&a.location.city&&a.location.state&&(c+="\n            in "+d(a.location.city)+", "+d(a.location.state)+"\n        "),c+="\n    </h1>\n    <h2>"+(null==(b=new Date(a.created_at).toDateString())?"":b)+'</h2>\n\n    <div class="body">\n        '+d(a.content)+"\n    </div>\n    \n    ",void 0==a.posted&&(c+='<a href="#back" onclick="history.go(-1);return false;" >&larr; Back</a>'),c+="\n</div>"},this.JST["app/templates/storyList.html"]=function(a){var b,c="";_.escape,Array.prototype.join;return a.filtered&&(c+="\n<h1>Stories from "+(null==(b=a.city)?"":b)+", "+(null==(b=a.state)?"":b)+"</h1>\n"),c+='\n<div class="storyList grid">\n    <!-- story items added here -->\n</div>\n\n<div class="backLink">\n    <a href="#back" onclick="history.go(-1);return false;" >&larr; Back</a>\n</div>'},this.JST["app/templates/storyListItem.html"]=function(a){var b,c="",d=_.escape;Array.prototype.join;return c+='<div class="item story" id="story-'+(null==(b=a.id)?"":b)+'">\n    <div class="body">\n        ',c+=a.content.length>160?"\n            "+d(a.content.slice(0,160))+"...\n        ":"\n            "+d(a.content)+"\n        ",c+='\n        \n    </div>\n    <div class="meta">\n        <span class="permalink">\n            <a class="permalink" href="#read/story/'+(null==(b=a.id)?"":b)+'">permalink</a>\n        </span>\n        <span class="date">\n            '+(null==(b=moment(a.created_at).format("M/D/YYYY - h:mma"))?"":b)+"\n        </span>\n    </div>\n</div>"},this.JST["app/templates/storyListNoResults.html"]=function(a){var b="";_.escape;return b+='<div class="item" style="">\n    <h2>None Yet</h2>\n    <a href="#share">+ Share Yours</a>\n</div>'},this.JST["app/templates/storyMap.html"]=function(a){var b="";_.escape;return b+='<div class="storyMap clearfix">\n	<div id="zoom">\n		<div class="btn zoom in">+</div>\n		<input type="range"/>\n		<div class="btn zoom out">-</div>\n	</div>\n	<div id="map"></div>\n</div>'},this.JST["app/templates/storyPost.html"]=function(a){var b,c="";_.escape;return c+='<span class="icon icon-write"></span>\n<div class="storyPost">\n    <form class="form" action="'+(null==(b=Solidarity.apiRoot)?"":b)+'story/" id="storyPost" method="POST">\n        <div class="box white">\n            <div class="form-group first">\n                <label for="content" class="hidden">Story: <span class="required">*</span></label>\n                <textarea id="content" rows="12" class="open" name="content"\n                placeholder="SHARE YOUR STORY" value="" required="required"></textarea>\n            </div>\n\n            <div class="form-group row break">\n                <h4>Optional Information</h4>\n            </div>\n\n            <div class="form-group row">\n                <label for="name" class="hidden">Name:</label>\n                <input id="name" name="name"\n                placeholder="NAME" value="" type="text">\n            </div>\n\n            <div class="form-group row">\n                <label for="occupation" class="hidden">Occupation:</label>\n                <input id="occupation" name="occupation"\n                placeholder="OCCUPATION"  value="" type="text">\n            </div>\n\n            <div class="form-group row">\n                <label for="employer" class="hidden">Employer:</label>\n                <input id="employer" name="employer"\n                placeholder="EMPLOYER" value="" type="text">\n            </div>\n\n            <div class="form-group row last">\n                <label for="location" class="hidden">Location:</label>\n                <div class="input-group" id="location">\n                    <button type="button" class="btn btn-sm line-height-1" id="geolocate"><i class="glyphicon glyphicon-screenshot"></i></button>\n\n                    <input id="city" name="location.city" value="" type="text" placeholder="CITY">\n                    \n                    <select id="state" class="selectpicker show-tick show-menu-arrow" data-size="auto" name="location.state">\n                        <option value="">STATE</option>\n                        <option value="AL">Alabama</option>\n                        <option value="AK">Alaska</option>\n                        <option value="AS">American Samoa</option>\n                        <option value="AZ">Arizona</option>\n                        <option value="AR">Arkansas</option>\n                        <option value="CA">California</option>\n                        <option value="CO">Colorado</option>\n                        <option value="CT">Connecticut</option>\n                        <option value="DE">Delaware</option>\n                        <option value="DC">District of Columbia</option>\n                        <option value="FL">Florida</option>\n                        <option value="GA">Georgia</option>\n                        <option value="GU">Guam</option>\n                        <option value="HI">Hawaii</option>\n                        <option value="ID">Idaho</option>\n                        <option value="IL">Illinois</option>\n                        <option value="IN">Indiana</option>\n                        <option value="IA">Iowa</option>\n                        <option value="KS">Kansas</option>\n                        <option value="KY">Kentucky</option>\n                        <option value="LA">Louisiana</option>\n                        <option value="ME">Maine</option>\n                        <option value="MD">Maryland</option>\n                        <option value="MA">Massachusetts</option>\n                        <option value="MI">Michigan</option>\n                        <option value="MN">Minnesota</option>\n                        <option value="MS">Mississippi</option>\n                        <option value="MO">Missouri</option>\n                        <option value="MT">Montana</option>\n                        <option value="NE">Nebraska</option>\n                        <option value="NV">Nevada</option>\n                        <option value="NH">New Hampshire</option>\n                        <option value="NJ">New Jersey</option>\n                        <option value="NM">New Mexico</option>\n                        <option value="NY">New York</option>\n                        <option value="NC">North Carolina</option>\n                        <option value="ND">North Dakota</option>\n                        <option value="MP">Northern Mariana Islands</option>\n                        <option value="OH">Ohio</option>\n                        <option value="OK">Oklahoma</option>\n                        <option value="OR">Oregon</option>\n                        <option value="PA">Pennsylvania</option>\n                        <option value="PR">Puerto Rico</option>\n                        <option value="RI">Rhode Island</option>\n                        <option value="SC">South Carolina</option>\n                        <option value="SD">South Dakota</option>\n                        <option value="TN">Tennessee</option>\n                        <option value="TX">Texas</option>\n                        <option value="UT">Utah</option>\n                        <option value="VT">Vermont</option>\n                        <option value="VI">Virgin Islands</option>\n                        <option value="VA">Virginia</option>\n                        <option value="WA">Washington</option>\n                        <option value="WV">West Virginia</option>\n                        <option value="WI">Wisconsin</option>\n                        <option value="WY">Wyoming</option>\n                    </select>\n                </div>\n            </div>\n        </div>\n\n        <div class="form-group break push-down">\n            <h4>Or text your story to 855.464.7671</h4>\n        </div>\n\n        <div class="form-group buttons last clearfix">\n            <div class="input-group left">\n                <button class="btn" id="cancel">\n                    <span class="icon icon-close"></span>\n                    CANCEL\n                </button>\n            </div>\n\n            <div class="input-group right">\n                <label for="photo" class="hidden">Photo:</label>\n                <span class="btn btn-default btn-file">\n                    <span class="icon icon-camera"></span>\n                    <input type="file" name="photo" accept="image/*" />\n                </span>\n\n                <button type="submit" class="btn btn-success">\n                    <span class="icon icon-check"></span>\n                    SHARE\n                </button>\n            </div>\n        </div>\n    </form>\n</div>'},Solidarity.Models=Solidarity.Models||{},function(){Solidarity.Models.BaseModel=Backbone.Model.extend({initialize:function(){},defaults:{},validate:function(a,b){},parse:function(a,b){return a},url:function(){var a=this.get("links"),b=a&&a.self;return b||(b=Backbone.Model.prototype.url.call(this)),b},sync:function(a,b,c){var d=_.isFunction(b.url)?b.url():b.url;return d+="/"===d.charAt(d.length-1)?"":"/",c=_.extend(c,{url:d}),Backbone.sync(a,b,c)}})}(),Solidarity.Models=Solidarity.Models||{},function(){Solidarity.Models.Story=Solidarity.Models.BaseModel.extend({urlRoot:Solidarity.apiRoot+"story/"})}(),Solidarity.Models=Solidarity.Models||{},function(){Solidarity.Models.Author=Solidarity.Models.BaseModel.extend({url:Solidarity.apiRoot+"author/",idAttributemodel:"username"})}(),Solidarity.Models=Solidarity.Models||{},function(){Solidarity.Models.State=Solidarity.Models.BaseModel.extend({urlRoot:Solidarity.apiRoot+"state/"}),Solidarity.Models.County=Solidarity.Models.BaseModel.extend({urlRoot:Solidarity.apiRoot+"county/"}),Solidarity.Models.Location=Solidarity.Models.BaseModel.extend({urlRoot:Solidarity.apiRoot+"location/"})}(),Solidarity.Collections=Solidarity.Collections||{},function(){Solidarity.Collections.BaseCollection=Backbone.PageableCollection.extend({resultsField:"results",totalRecordsField:"count",nextField:"next",previousField:"previous",queryParams:{totalPages:null,totalRecords:null,pageSize:null},state:{pageSize:25},parseRecords:function(a,b){return a&&_.has(a,this.resultsField)&&_.isArray(a[this.resultsField])?a[this.resultsField]:void Backbone.PageableCollection.prototype.parseRecords.apply(this,arguments)},parseState:function(a,b,c,d){return{totalRecords:a[this.totalRecordsField]}},parseLinks:function(a,b){return{prev:a[this.previousField],next:a[this.nextField],first:null}}})}(),Solidarity.Collections=Solidarity.Collections||{},function(){Solidarity.Collections.Stories=Solidarity.Collections.BaseCollection.extend({model:Solidarity.Models.Story,url:Solidarity.apiRoot+"story/"})}(),Solidarity.Collections=Solidarity.Collections||{},function(){Solidarity.Collections.Authors=Solidarity.Collections.BaseCollection.extend({model:Solidarity.Models.Author})}(),Solidarity.Collections=Solidarity.Collections||{},function(){Solidarity.Collections.States=Solidarity.Collections.BaseCollection.extend({model:Solidarity.Models.State,url:Solidarity.apiRoot+"state/"}),Solidarity.Collections.Counties=Solidarity.Collections.BaseCollection.extend({model:Solidarity.Models.State,url:Solidarity.apiRoot+"county/"}),Solidarity.Collections.Locations=Solidarity.Collections.BaseCollection.extend({model:Solidarity.Models.Location,url:Solidarity.apiRoot+"location/"})}(),Solidarity.RegionManager=function(a,b){var c,d=!0,e="#mainRegion",f="ul.navbar-nav",g={},h=function(a){a&&a.close&&a.close()},i=function(a){d=!1;var b=a.render();b&&b.$el&&(b.$el.appendTo(e),b.delegateEvents()),a.onShow&&a.onShow()};return g.show=function(a,d){h(c),c=a,i(c),void 0!==d?(b(f+" li.button.active").removeClass("active"),b(f+" li.button a[href="+d+"]").parent("li.button").addClass("active")):b(f+" li.button.active").removeClass("active")},g.currentView=function(){return c},g.freshView=function(){return d},g.showOverlay=function(a){var c=b('<div id="overlay"></div>');b("body").append(c),void 0!==a&&b("#overlay").addClass("active")},g.hideOverlay=function(){b("body > #overlay").removeClass("active")},g}(Backbone,jQuery),Solidarity.Views=Solidarity.Views||{},function(){Solidarity.Views.BaseView=Backbone.View.extend({assign:function(a,b){a.setElement(this.$(b)).render()},initialize:function(){Solidarity.log("initalize "+this.cid)},render:function(){return this.$el.html(this.template()),this},close:function(){this.beforeClose&&this.beforeClose(),this.remove(),this.onClose&&this.onClose(),this.trigger("close"),this.unbind()}}),Solidarity.Views.FormView=Solidarity.Views.BaseView.extend({events:{submit:"submit","keyup input.has-error":"clearFieldErrors"},templateError:JST["app/templates/formError.html"],render:function(){return this.$el.html(this.template()),this},onShow:function(){this.$form=$(this.form)},clearFieldErrors:function(a){var b=this,c=$(a.target).attr("name");$(b.form+' label[for="'+c+'"]').removeClass("has-error"),$(b.form+' input[name="'+c+'"]').removeClass("has-error"),$(b.form+' input[name="'+c+'"] + .help-block').html("")},clearAlerts:function(){$(this.form+" .alert").remove()},submit:function(a){a.preventDefault();var b=this;return Solidarity.log("submit "+b.$form[0].id),Solidarity.log(b.$form.serializeArray()),$.ajax({type:b.$form.attr("method"),url:b.$form.attr("action"),data:b.$form.serializeArray(),success:function(a){return $(b.form+" .alert").remove(),void 0!==b.onSuccess?b.onSuccess(a):!0},error:function(a){b.clearAlerts(),b.$form.addClass("error");var c=a.responseJSON;return void 0===c?(b.$form.append(b.templateError({non_field_errors:a.statusText})),Solidarity.log(a.responseText),!0):(Solidarity.log(c),_.map(c,function(a,c){$(b.form+' label[for="'+c+'"]').addClass("has-error"),$(b.form+' input[name="'+c+'"]').addClass("has-error"),$(b.form+' input[name="'+c+'"] + .help-block').html(a)}),void 0!==c.non_field_errors&&b.$form.append(b.templateError(c)),!1)}}),!1},redirect:function(){window.urlParam("redirect")?Backbone.history.navigate(window.urlParam("success"),{trigger:!0}):Backbone.history.navigate("",{trigger:!0})}})}(),Solidarity.Views=Solidarity.Views||{},
function(){Solidarity.Views.Story=Solidarity.Views.BaseView.extend({template:JST["app/templates/story.html"],el:"#content",events:{},initialize:function(){var a=this;this.listenTo(this.model,"add",this.render),this.model.fetch({success:$.proxy(a.render,a)})},render:function(){return this.model&&this.model.attributes&&this.$el.html(this.template(this.model.toJSON())),this}})}(),Solidarity.Views=Solidarity.Views||{},function(){Solidarity.Views.StoryList=Solidarity.Views.BaseView.extend({template:JST["app/templates/storyList.html"],templateItem:JST["app/templates/storyListItem.html"],templateNoResults:JST["app/templates/storyListNoResults.html"],el:"#content",events:{"click a.loadMore":"loadMore"},initialize:function(a){this.options=a,this.render(),this.collection=new Solidarity.Collections.Stories({mode:"infinite"}),this.listenTo(this.collection,"add",this.addStory),this.filterData(),this.getFirstPage()},filterData:function(){},getFirstPage:function(){var a=this;this.collection.getFirstPage({success:function(b){0===b.length&&$(a.templateNoResults({})).appendTo(".storyList"),a.collection.hasNextPage()&&$(".item.more").show(),window.location.href.indexOf("?story=")>0&&a.scrollTo(Solidarity.urlParam("story")),a.layout()}})},addStory:function(a){a.attributes.content&&$(this.templateItem(a.attributes)).appendTo(".storyList"),this.collection.hasNextPage()||$(".item.more").hide()},render:function(){return this.$el.html(this.template({})),this},layout:function(){$(".storyList.grid").stalactite({duration:150,easing:"swing",cssPrefix:".stalactite",cssPrep:!0,fluid:!0,loader:"<img />"})},loadMore:function(){this.collection.getNextPage()},scrollTo:function(a){var b=$("#story-"+a);b.length>0&&$("html, body").scrollTop(b.offset().top)}}),Solidarity.Views.StoryListLocation=Solidarity.Views.StoryList.extend({filterData:function(){this.collection.queryParams=_.extend(this.collection.queryParams,{city:this.options.city,state:this.options.state})},render:function(){return this.$el.html(this.template({filtered:!0,city:this.options.city,state:this.options.state})),this}})}(),Solidarity.Views=Solidarity.Views||{},function(){Solidarity.Views.StoryMap=Solidarity.Views.BaseView.extend({template:JST["app/templates/storyMap.html"],el:"#content",events:{},dataCache:{us:void 0,counties:{},zips:{}},initialize:function(){this.states=new Solidarity.Collections.States({}),this.counties=new Solidarity.Collections.Counties({}),this.locations=new Solidarity.Collections.Locations({}),this.colorBackground="#3F3F3F",this.colorUnselected="#E4E4E4",this.colorList=["#E4E4E4","#F3EB99","#FAC85F","#F9A946","#EC913D"]},onShow:function(){var a=this;this.drawMap(),this.states.fetch({success:function(b){a.renderStoryCollection(b,"g.country path.feature",void 0,1e3)}})},drawMap:function(){function a(a,b){void 0===b&&(b=.9);var c=r.bounds(a),d=c[1][0]-c[0][0],e=c[1][1]-c[0][1],f=(c[0][0]+c[1][0])/2,g=(c[0][1]+c[1][1])/2,h=b/Math.max(d/m,e/n),i=[m/2-h*f,n/2-h*g];s.svg.transition().duration(750).call(q.translate(i).scale(h).event)}function b(){o.style("fill",this.colorUnselected).classed("feature",!0).classed("background",!1).classed("active",!1),o=d3.select(null),p.classed("feature",!0).classed("background",!1).classed("active",!1),p=d3.select(null),d3.selectAll("g.state").remove(),s.svg.transition().duration(750).call(q.translate([0,0]).scale(1).event),s.renderStoryCollection(s.states,"g.country path.state",void 0,1e3)}function c(){d3.event.scale>1&&(s.map.style("stroke-width",1.5/d3.event.scale+"px"),s.map.attr("transform","translate("+d3.event.translate+")scale("+d3.event.scale+")"))}function d(){q.scale(d3.select(this).property("value")).event(s.svg)}function e(){d3.event.defaultPrevented&&d3.event.stopPropagation()}function f(c){if(Solidarity.log("clickState",c.properties.name),o.node()===this)return b();o.style("fill",this.colorUnselected).classed("feature",!0).classed("background",!1).classed("active",!1),o=d3.select(this).classed("active",!0),d3.selectAll("g.state").remove();var d=.9;"25"===c.id&&(d=.75),"36"===c.id&&(d=.6),"09"===c.id&&(d=.5),"44"===c.id&&(d=.3),"11"===c.id&&(d=.2),a(c,d);var e=c.properties.name.replace(" ","_");queue().defer(d3.json,Solidarity.dataRoot+"geography/counties/"+e+".topo.json").await(j),queue().defer(d3.json,Solidarity.dataRoot+"geography/zcta/"+e+".topo.json").await(k)}function g(b){Solidarity.log("clickCounty",b.properties.name),d3.selectAll(b).style("fill","transparent"),a(b),l(b)}function h(a){Solidarity.log("clickZip",a.id),d3.selectAll("g.country path.background").style("fill","transparent")}function i(a,b){if(a)return Solidarity.error(a,"error in drawStates"),!1;var c=s.map.append("g").attr("class","country").attr("id","US");c.append("path").datum(topojson.merge(b,b.objects.states.geometries)).attr("class","background").attr("d",r),c.selectAll("path").attr("class","states").data(topojson.feature(b,b.objects.states).features).enter().append("path").attr("d",r).attr("class","feature state").on("click",f),c.append("path").datum(topojson.mesh(b,b.objects.states,function(a,b){return a!==b})).attr("class","border").attr("d",r)}function j(a,b){if(Solidarity.log("drawCounties",b),a)return Solidarity.error(a,"error in drawCounties"),!1;for(var c in b.objects)break;var d=c.split(".")[0],e=s.map.append("g").attr("class","state").attr("id",d);e.selectAll("path").attr("class","counties").style("fill",s.colorUnselected).data(topojson.feature(b,b.objects[c]).features).enter().append("path").attr("d",r).attr("class","feature county").on("click",g);e.append("path").datum(topojson.mesh(b,b.objects[c])).attr("class","border").style("border","white").attr("d",r);var f={models:[]};s.renderStoryCollection(f,"g.state path.county","g.country path.state",100)}function k(a,b){if(Solidarity.log("loadZips",b),a)return Solidarity.error(a,"error in loadZips"),!1;for(var c in b.objects)break;Solidarity.log("loaded",c),s.dataCache.zips[c]=b}function l(a){var b=d3.selectAll("g.state"),c=b[0][0].id,d=c+".geo",e=s.dataCache.zips[d];b.selectAll("path").attr("class","zipcodes").style("fill",s.colorUnselected).data(topojson.feature(e,e.objects[d]).features).enter().append("path").attr("d",r).attr("class","feature zipcode").on("click",h);b.append("path").datum(topojson.mesh(e,e.objects[d])).attr("class","border").attr("d",r);var f={models:[]};s.renderStoryCollection(f,"g.state path.zipcode","g.state path.county",10)}var m=960,n=500,o=d3.select(null),p=d3.select(null);this.projection=d3.geo.albersUsaPr().scale(1e3).translate([m/2,n/2]);var q=d3.behavior.zoom().translate([0,0]).scale(1).scaleExtent([1,8]).on("zoom",c),r=(d3.selectAll("#zoom input").attr("value",q.scaleExtent()[0]).attr("min",q.scaleExtent()[0]).attr("max",q.scaleExtent()[1]).attr("step",(q.scaleExtent()[1]-q.scaleExtent()[0])/4).on("input",d),d3.geo.path().projection(this.projection));this.svg=d3.select("#map").append("svg").attr("preserveAspectRatio","xMinYMin meet").attr("viewBox","0 0 "+m+" "+n).classed("svg-content-responsive",!0).on("click",e,!0),this.svg.append("rect").attr("class","background").attr("width",m).attr("height",n).on("click",b),this.map=this.svg.append("g");var s=this;this.svg.call(q).call(q.event),void 0===this.us_states?d3.json(Solidarity.dataRoot+"geography/states.topo.json",function(a,b){Solidarity.log("requesting states.topo.json"),s.dataCache.us=b,i(a,s.dataCache.us)}):(Solidarity.log("using cached states.topo.json"),i(null,this.dataCache.us))},colorScale:function(a,b){var c=_.pluck(_.reject(a,_.isUndefined),b).sort(),d=jenks(c,5);d[4]=d[4]+1;var e=d3.scale.quantile().domain(d.slice(1)).range(this.colorList);return e},renderStoryCollection:function(a,b,c,d){var e=a.models.map(function(a){return a.attributes}),f=this.map.selectAll(b).data(),g=_.map(f,function(a,b){if(a.properties){var c=_.findWhere(e,{name:a.properties.name});c&&(a.properties.story_count=c.story_count),a.properties.story_count=Math.floor(Math.random(1)*d)}return a}),h=_.pluck(g,"properties"),i=this.colorScale(h,"story_count");this.map.selectAll(b).data(g).style("fill",function(a){return void 0===a.properties?this.colorUnselected:i(a.properties.story_count||0)}),d3.selectAll("path.background").attr("fill",null),c&&(d3.selectAll(c).style("fill",this.colorUnselected),d3.selectAll("path.active").attr("class","background"));var j=d3.tip().html(function(a){if(a.properties&&a.properties.story_count){var b='<%= story_count %> stor<%= story_count > 1 ? "ies" : "y"%> in <%= name %>';return void 0===a.properties.name&&a.id&&(a.properties.name=a.id),_.template(b)(a.properties)}});j.style("color","#666"),j.offset(function(){return[this.getBBox().height/2,0]}),this.map.call(j),this.map.selectAll(b).on("mouseover",j.show).on("mouseout",j.hide)}})}(),Solidarity.Views=Solidarity.Views||{},function(){Solidarity.Views.ShareBar=Solidarity.Views.FormView.extend({template:JST["app/templates/storyPost.html"],el:"#shareBar",form:"form#storyPost",events:{'click textarea[name="content"]':"show",'keyup textarea[name="content"].closed':"show","click button#geolocate":"geolocate","click button#cancel":"hide"},beenRendered:!1,isOpen:!1,initialize:function(){_.extend(this.events,Solidarity.Views.FormView.prototype.events)},render:function(){return Solidarity.log("shareBar.render"),this.$el.hide().html(this.template()).slideDown(1e3),this.$form=$(this.form),this.beenRendered=!0,this},show:function(){Solidarity.log("shareBar.show"),this.isOpen||(Solidarity.mainContent.showOverlay(!0),$("#overlay").delay(500).addClass("active"),this.beenRendered?(this.$el.animate({height:"100%"},500),$("textarea",this.$el).delay(500).removeClass("closed").addClass("open")):this.render(),this.$el.removeClass("closed"),this.isOpen=!0,this.onShow())},hide:function(a){a.preventDefault(),this.$el.animate({height:"30px"},500).delay(500).addClass("closed"),$("textarea",this.$el).removeClass("open").addClass("closed"),this.isOpen=!1,Solidarity.mainContent.hideOverlay()},onShow:function(){this.$form=$(this.form),$(".selectpicker").selectpicker()},onSuccess:function(a){Solidarity.log("storyPosted",a);var b="read/story/"+a.id+"?posted=true";Backbone.history.navigate(b,{trigger:!0})},geolocate:function(){return Modernizr.geolocation?(Solidarity.log("geolocate!"),void navigator.geolocation.getCurrentPosition(this.locationToCityState,this.geoError.bind(this))):this.geoError({code:0,message:"Your browser does not support geolocation."})},geoError:function(a){this.clearAlerts();var b="Geolocation error";1===a.code&&(b="Please allow the browser to access your location."),2===a.code&&(b="Geolocation position unavailable."),3===a.code&&(b="Geolocation position timeout."),this.$form.append(this.templateError({non_field_errors:b}))},locationToCityState:function(a){var b=this;$.ajax("https://search.mapzen.com/v1/reverse",{type:"GET",data:{"point.lat":a.coords.latitude,"point.lon":a.coords.longitude,layers:"address",size:1,api_key:Solidarity.mapzenKey},success:function(a){var b=a.features[0];$("input#city").val(b.properties.locality.toUpperCase()),$("#state.selectpicker").selectpicker("val",b.properties.region_a),$("button#geolocate").attr("disabled","disabled")},error:function(a,c,d){return b.geoError({code:4,message:d})}})}})}(),Solidarity.Views=Solidarity.Views||{},function(){Solidarity.Views.AuthLogin=Solidarity.Views.FormView.extend({form:"form#login",template:JST["app/templates/authLogin.html"],onSuccess:function(a){return a.key&&$.cookie("token",a.key),this.redirect()}}),Solidarity.Views.AuthRegister=Solidarity.Views.FormView.extend({form:"form#register",template:JST["app/templates/authRegister.html"]}),Solidarity.Views.AuthPasswordChange=Solidarity.Views.FormView.extend({form:"form#passwordChange",template:JST["app/templates/authPasswordChange.html"]}),Solidarity.Views.AuthPasswordReset=Solidarity.Views.FormView.extend({form:"form#passwordReset",template:JST["app/templates/authPasswordReset.html"]}),Solidarity.Views.AuthPasswordResetConfirm=Solidarity.Views.FormView.extend({form:"form#passwordResetConfirm",template:JST["app/templates/authPasswordResetConfirm.html"]}),Solidarity.Views.AuthUserDetails=Solidarity.Views.FormView.extend({form:"form#userDetails",template:JST["app/templates/authUserDetails.html"]})}(),Solidarity.Views=Solidarity.Views||{},function(){Solidarity.Views.Page=Solidarity.Views.BaseView.extend({el:"#content",initialize:function(a){this.template=JST[a],this.render()},render:function(){return this.$el.html(this.template()),this}})}(),Solidarity.Views=Solidarity.Views||{},function(){Solidarity.Views.Splash=Solidarity.Views.BaseView.extend({template:JST["app/templates/splash.html"],el:"#content",events:{"click button.enter":"enter","click button.lang":"clickLanguage"},languages:["zh","en","es","tl"],langIndex:0,rotateLanguageTimer:void 0,render:function(){this.$el.html(this.template());var a=this;return $.when($("ul.statement").animate({top:0},1e3).promise(),$("ul.languages li").eq(0).delay(500).animate({top:"5px",opacity:1},1e3).promise(),$("ul.languages li").eq(1).delay(1e3).animate({top:"5px",opacity:1},1e3).promise(),$("ul.languages li").eq(2).delay(1500).animate({top:"5px",opacity:1},1e3).promise(),$("ul.languages li").eq(3).delay(2e3).animate({top:"5px",opacity:1},1e3).promise()).done(function(){Solidarity.log("Splash load complete."),a.rotateLanguageTimer=setInterval(a.rotateLanguage.bind(a),2500),$(".splash").bgswitcher({images:[Solidarity.siteRoot+"images/splash/f747e62b.temp-1.jpg",Solidarity.siteRoot+"images/splash/46d01ee4.temp-2.jpg",Solidarity.siteRoot+"images/splash/ad061dd3.temp-3.jpg"],interval:1e4,effect:"fade"})}),this},rotateLanguage:function(){this.langIndex+=1,this.langIndex===this.languages.length&&(this.langIndex=0);var a=this.languages[this.langIndex],b=$("ul.languages .btn[data-lang="+a+"]");return this.changeLanguage(b)},changeLanguage:function(a){var b=a.data("lang");$("ul.languages .btn.active").removeClass("active"),$("ul.statement li").fadeOut(500),$("ul.statement li#"+b).fadeIn(500),a.addClass("active")},clickLanguage:function(a){var b=$(a.target),c=b;return c.is("span")&&(c=b.parents("button")),clearInterval(this.rotateLanguageTimer),this.changeLanguage(c)},rotateImage:function(){this.imageIndex+=1,this.imageIndex===this.images.length&&(this.imageIndex=0),$("div.splash").css("background-image","url("+this.images[this.imageIndex]+")")},enter:function(){$("nav.navbar-default").removeClass("hidden"),$("footer.footer").removeClass("hidden"),Solidarity.language=this.languages[this.currentLanguageID],Backbone.history.navigate("#map",{trigger:!0})}})}(),Solidarity.Views=Solidarity.Views||{},function(){Solidarity.Views.Index=Solidarity.Views.BaseView.extend({template:JST["app/templates/index.html"],el:"#content",events:{},render:function(){return this.$el.html(this.template()),this}})}(),Solidarity.Routers=Solidarity.Routers||{},function(){Solidarity.Routers.Base=Backbone.Router.extend({options:{trailingSlashIsSignificant:!0},initialize:function(){this.bind("route",this.pageView)},pageView:function(){var a=Backbone.history.getFragment();if(/^\//.test(a)||""===a||(a="/"+a),"undefined"!=typeof window._gaq&&_gaq.push(["_trackPageview",a]),"undefined"!=typeof window.GoogleAnalyticsObject){var b=window.GoogleAnalyticsObject;window[b]("send","pageview",a)}}})}(),Solidarity.Routers=Solidarity.Routers||{},function(){Solidarity.Routers.Auth=Solidarity.Routers.Base.extend({routes:{"auth/register":"register","auth/login":"login","auth/logout":"logout","auth/password/change":"passwordChange","auth/password/reset":"passwordReset","auth/password/reset/confirm":"passwordResetConfirm","auth/user":"userDetails"},register:function(){Solidarity.mainContent.show(new Solidarity.Views.AuthRegister({el:"#content"}))},login:function(){Solidarity.mainContent.show(new Solidarity.Views.AuthLogin({el:"#content"}))},logout:function(){Solidarity.mainContent.show(new Solidarity.Views.AuthLogout({el:"#content"}))},passwordChange:function(){Solidarity.mainContent.show(new Solidarity.Views.AuthPasswordChange({el:"#content"}))},passwordReset:function(){Solidarity.mainContent.show(new Solidarity.Views.AuthPasswordReset({el:"#content"}))},passwordResetConfirm:function(){Solidarity.mainContent.show(new Solidarity.Views.AuthPasswordResetConfirm({el:"#content"}))},userDetails:function(){Solidarity.mainContent.show(new Solidarity.Views.AuthUserDetails({el:"#content"}))}})}(),Solidarity.Routers=Solidarity.Routers||{},function(){Solidarity.Routers.Pages=Solidarity.Routers.Base.extend({routes:{"":"index",learn:"learn",splash:"splash",about:"about",privacy:"privacy",copyright:"copyright",admin:"adminRedirect"},index:function(){Solidarity.mainContent.freshView()?Backbone.history.navigate("splash",{trigger:!0}):Backbone.history.navigate("map",{trigger:!0})},splash:function(){Solidarity.mainContent.show(new Solidarity.Views.Splash({}))},learn:function(){Solidarity.mainContent.show(new Solidarity.Views.Page("app/templates/learn.html"),"#learn")},about:function(){Solidarity.mainContent.show(new Solidarity.Views.Page("app/templates/about.html"))},privacy:function(){Solidarity.mainContent.show(new Solidarity.Views.Page("app/templates/privacy.html"))},copyright:function(){Solidarity.mainContent.show(new Solidarity.Views.Page("app/templates/copyright.html"))},adminRedirect:function(){window.location.href="https://stories-of-solidarity.herokuapp.com/admin/"}})}(),Solidarity.Routers=Solidarity.Routers||{},function(){Solidarity.Routers.Stories=Solidarity.Routers.Base.extend({routes:{map:"storyMap",read:"storyList","read/story/:id":"storyView","list/:state/:city":"storyListLocation"},cached:{},storyMap:function(){Solidarity.mainContent.show(new Solidarity.Views.StoryMap,"#map")},storyList:function(){Solidarity.mainContent.show(new Solidarity.Views.StoryList,"#read")},storyListLocation:function(a,b){Solidarity.mainContent.show(new Solidarity.Views.StoryListLocation({state:a,city:b}),"#read")},storyView:function(a){Solidarity.mainContent.show(new Solidarity.Views.Story({model:new Solidarity.Models.Story({id:a})}),"#read")}})}();